# Example Validation Notes

This document captures the numerical checks that accompany the example
executables. Use it alongside `docs/numerical_methods.md` and
`docs/free_body_diagrams.md` when inspecting solver accuracy. Each example
accepts an optional command-line argument with a CSV file path; when provided,
the full time series is recorded for plotting or CLI-driven reports.

## Point Mass Constant Acceleration
- **Scenario:** 1 kg mass subject to constant thrust producing `a = 2 m/s²`.
- **Integrator:** `dm_integrate_rk4` (example) and both Euler/RK4 in
  `test_numerical_solvers`.
- **Analytic expectation:** `x(t) = 0.5·a·t²`, `v(t) = a·t`,
  `KE = 0.5·m·v²`, Work by thrust = `F·x`.
- **Validation:**  
  - Example output lists time, position, velocity, kinetic energy, and work at
    0.1 s increments (`examples/point_mass/main.c`).  
  - Unit test compares Euler and RK4 trajectories against closed-form values and
    reports the kinetic energy vs. work balance. Euler exhibits a small energy
    error (~2×10⁻² J) due to first-order drift, while RK4 matches to <10⁻⁹ J.

## Damped Spring Pendulum
- **Scenario:** 0.5 kg mass on a spring (`k = 15 N/m`, rest length 0.5 m) with
  light damping (`c = 0.3 N·s/m`) in gravity.
- **Integrator:** `dm_integrate_rk4`.
- **Energies tracked:** Kinetic `½m‖v‖²`, spring potential
  `½k(r - L₀)²`, gravitational `mgy`.
- **Validation:**  
  - Example output (every 0.5 s) enumerates position, velocity, and each energy
    component plus the total.  
  - Unit test `test_spring_pendulum_energy_decay` ensures the total mechanical
    energy decays monotonically (allowing ≤10⁻⁶ J numerical noise) and logs the
    initial/final energy gap. This confirms damping removes energy as expected.

## Planar Double Pendulum
- **Scenario:** Two 1 kg links (`l₁ = l₂ = 1 m`) with gravity, starting from
  `θ₁ = θ₂ = π/2` and zero velocities.
- **Integrator:** `dm_integrate_rk4` in the example; adaptive Dormand–Prince
  (`dm_integrate_rk45_adaptive`) in the test harness.
- **Energies:** Kinetic energy combines link velocities while potential uses
  `mgy` for each mass relative to the pivot height.
- **Validation:**  
  - Example prints angles, angular rates, and energy components every 0.2 s,
    and emits a CSV when a file path argument is supplied.  
  - Unit test `test_double_pendulum_adaptive_energy` compares fixed-step RK4 and
    adaptive RK45 over 5 s; the adaptive method reduces energy drift by over an
    order of magnitude (<10⁻² J absolute error).

## Next Steps
- Once the double pendulum and inverted pendulum stages are implemented, extend
  this document with their energy/momentum checks and include plots generated by
  the upcoming CLI tool.
